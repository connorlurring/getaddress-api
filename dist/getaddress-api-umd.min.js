!function(t,s){"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("node-fetch")):"function"==typeof define&&define.amd?define(["exports","node-fetch"],s):s((t="undefined"!=typeof globalThis?globalThis:t||self).getAddress={},t.fetch)}(this,(function(t,s){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=e(s);class n{constructor(t){this.isSuccess=t}}class o extends n{constructor(){super(!0)}}class r extends o{constructor(t){super(),this.suggestions=t}toSuccess(){return this}toFailed(){throw new Error("Did not fail")}}class a extends o{constructor(t){super(),this.address=t}toSuccess(){return this}toFailed(){throw new Error("Did not fail")}}class u extends o{constructor(t){super(),this.addresses=t}toSuccess(){return this}toFailed(){throw new Error("Did not fail")}}class c extends n{constructor(t,s){super(!1),this.status=t,this.message=s}toSuccess(){throw new Error("Not a success")}toFailed(){return this}}class d extends n{constructor(t,s){super(!1),this.status=t,this.message=s}toSuccess(){throw new Error("Not a success")}toFailed(){return this}}class l extends n{constructor(t,s){super(!1),this.status=t,this.message=s}toSuccess(){throw new Error("Not a success")}toFailed(){return this}}class h{constructor(){this.all=!1,this.template=null,this.top=null}static Default(){let t=new h;return t.all=!0,t}}class p{constructor(t,s,e,i,n,o,r,a,u,c,d,l,h,p,f){this.formatted_address=t,this.thoroughfare=s,this.building_name=e,this.sub_building_name=i,this.sub_building_number=n,this.building_number=o,this.line_1=r,this.line_2=a,this.line_3=u,this.line_4=c,this.locality=d,this.town_or_city=l,this.county=h,this.district=p,this.country=f}}class f{constructor(t){this.api_key=t}async autocomplete(t,s=h.Default()){try{const e=await i.default(`https://api.getaddress.io/autocomplete/${t}?api-key=${this.api_key}`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({all:s.all,template:s.template,top:s.top})});if(200==e.status){const t=(await e.json()).suggestions;return new r(t)}const n=await e.json();return new d(e.status,n.Message)}catch(t){return t instanceof Error?new d(401,t.message):new d(401,"Unauthorised")}}async get(t){try{const s=await i.default(`https://api.getaddress.io/get/${t}?api-key=${this.api_key}`);if(200==s.status){const t=await s.json();return new a(t)}const e=await s.json();return new l(s.status,e.Message)}catch(t){return t instanceof Error?new l(401,t.message):new l(401,"Unauthorised")}}async find(t){try{const s=await i.default(`https://api.getaddress.io/find/${t}?api-key=${this.api_key}&expand=true`);if(200==s.status){const t=await s.json();return new u(t)}const e=await s.json();return new c(s.status,e.Message)}catch(t){return t instanceof Error?new c(401,t.message):new c(401,"Unauthorised")}}}t.Address=p,t.AutocompleteAddress=class extends p{constructor(t,s,e,i,n,o,r,a,u,c,d,l,h,p,f,g,w,_,y){super(i,n,o,r,a,u,c,d,l,l,h,f,g,w,_),this.postcode=t,this.latitude=s,this.longitude=e,this.formatted_address=i,this.thoroughfare=n,this.building_name=o,this.building_number=r,this.sub_building_name=a,this.sub_building_number=u,this.line_1=c,this.line_2=d,this.line_3=l,this.line_4=h,this.locality=p,this.town_or_city=f,this.county=g,this.district=w,this.country=_,this.residential=y}},t.AutocompleteFailed=d,t.AutocompleteOptions=h,t.AutocompleteSuccess=r,t.FindAddresses=class{constructor(t,s,e,i){this.postcode=t,this.latitude=s,this.longitude=e,this.addresses=i}},t.FindFailed=c,t.FindSuccess=u,t.GetAddressClient=f,t.GetFailed=l,t.GetSuccess=a,t.Result=n,t.Success=o,t.Suggestion=class{constructor(t,s,e){this.address=t,this.url=s,this.id=e}},t.default=f,Object.defineProperty(t,"__esModule",{value:!0})}));
